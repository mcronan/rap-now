doctype html
html(lang='en', ng-app="rapApp")
	head
		//- open graph markup for sharing
		meta(charset="utf-8")
		meta(property='og:url',content='https://rap-now.herokuapp.com')
		meta(property='og:type',content='website')
		meta(property='og:title',content='Rap Now')
		meta(property='og:description',content='Throw down with your friends')
		meta(property='og:image',content='https://i.ytimg.com/vi/iUs9douiYGE/maxresdefault.jpg')
		//- script(src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js")
		link(rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css")
		//- script(src="//bower_components/momentjs/min/moment.min.js")
		//- script(src="//bower_components/momentjs/min/locales.min.js")
		//- script(src="//bower_components/humanize-duration/humanize-duration.js")
		
		title Rap Now
		link(rel="stylesheet" type="text/css" href="main.css")

	body
		block content
		
		script.
			// for the LOGIN button
			(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.4&appId=461796887275673";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
			// end LOGIN button

			//- facebook SDK
			window.fbAsyncInit = function() {
			FB.init({
			appId      : '473646152796474',
			xfbml      : true,
			version    : 'v2.4'
			});
			};
			(function(d, s, id){
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) {return;}
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_US/sdk.js";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
			// This is called with the results from from FB.getLoginStatus().
			function statusChangeCallback(response) {
			console.log('statusChangeCallback');
			console.log(response);
			// The response object is returned with a status field that lets the
			// app know the current login status of the person.
			// Full docs on the response object can be found in the documentation
			// for FB.getLoginStatus().
			if (response.status === 'connected') {
			// Logged into your app and Facebook.
			testAPI();
			} else if (response.status === 'not_authorized') {
			// The person is logged into Facebook, but not your app.
			document.getElementById('status').innerHTML = 'Please log ' +
			'into this app.';
			} else {
			// The person is not logged into Facebook, so we're not sure if
			// they are logged into this app or not.
			document.getElementById('status').innerHTML = 'Please log ' +
			'into Facebook.';
				}
			}
			// This function is called when someone finishes with the Login
			// Button.  See the onlogin handler attached to it in the sample
			// code below.
			function checkLoginState() {
			FB.getLoginStatus(function(response) {
			statusChangeCallback(response);
			});
			}
			window.fbAsyncInit = function() {
			FB.init({
			appId      : '473646152796474',
			cookie     : true,  // enable cookies to allow the server to access
			// the session
			xfbml      : true,  // parse social plugins on this page
			version    : 'v2.2' // use version 2.2
			});
			FB.Event.subscribe('auth.login', function () {
			window.location = "http://google.com";
			});
			// Now that we've initialized the JavaScript SDK, we call
			// FB.getLoginStatus().  This function gets the state of the
			// person visiting this page and can return one of three states to
			// the callback you provide.  They can be:
			//
			// 1. Logged into your app ('connected')
			// 2. Logged into Facebook, but not your app ('not_authorized')
			// 3. Not logged into Facebook and can't tell if they are logged into
			//    your app or not.
			//
			//- // These three cases are handled in the callback function.
			FB.getLoginStatus(function(response) {
			statusChangeCallback(response);
			});
			};
			// Load the SDK asynchronously
			(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_US/sdk.js";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));
			// Here we run a very simple test of the Graph API after login is
			// successful.  See statusChangeCallback() for when this call is made.
			function testAPI() {
			console.log('Welcome!  Fetching your information.... ');
			FB.api('/me', function(response) {
			console.log('Successful login for: ' + response.name);
			document.getElementById('status').innerHTML =
			'Thanks for logging in, ' + response.name + '!';
			});
			}
			//may need this button again, contains scope
			//- fb:login-button(scope='public_profile,email', onlogin='checkLoginState();')
			//- #status

			//- // for the FEED dialog
			//- FB.ui(
			//- {
			//- method: 'feed',
			//- link: '	window.location.href',
			//- caption: 'testcaption',
			//- display: 'popup',
			//- },
			//- // callback
			//- function(response) {
			//- if (response && !response.error_code) {
			//- alert('Posting completed.');
			//- } else {
			//- alert('Error while posting.');
			//- }
			//- }
			//- );

			//- // for the SEND dialog
			//- FB.ui({
			//- method: 'send',
			//- link: 'https://rap-now.herokuapp.com/:uniqueID',
			//- });

			// for the SHARE (not feed) dialog
			(function(d, s, id) {
			var js, fjs = d.getElementsByTagName(s)[0];
			if (d.getElementById(id)) return;
			js = d.createElement(s); js.id = id;
			js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.4&appId=461796887275673";
			fjs.parentNode.insertBefore(js, fjs);
			}(document, 'script', 'facebook-jssdk'));

					

		//- a(href="https://www.facebook.com/dialog/feed?app_id=473646152796474&display=popup&caption=An%20example%20caption&link=https://rap-now.herokuapp.com&redirect_uri=https://rap-now.herokuapp.com") Share

	
		script(src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular.min.js")
		script(src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular-resource.js")
		script(src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.3/angular-route.js")
		script(src="main.js")